{"version":3,"sources":["../../src/lib/server.js"],"names":["createServer","app","Koa","router","Router","get","ctx","render","use","routes","server","http","callback","on"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;AAEA;;AAEO,MAAMA,YAAY,GAAG,YAAY;AACtC,QAAMC,GAAG,GAAG,IAAIC,YAAJ,EAAZ;AACA,QAAMC,MAAM,GAAG,IAAIC,kBAAJ,EAAf;AAEAD,EAAAA,MAAM,CAACE,GAAP,CAAW,GAAX,EAAgB,MAAMC,GAAN,IAAa;AAC3B,UAAMA,GAAG,CAACC,MAAJ,CAAW,OAAX,CAAN;AACD,GAFD,EAJsC,CAQtC;;AACAN,EAAAA,GAAG,CACAO,GADH,CACO,yBADP,EAEGA,GAFH,CAEO,wBAFP,EAGGA,GAHH,CAGOL,MAAM,CAACM,MAAP,EAHP;AAKA,QAAMC,MAAM,GAAGC,IAAI,CAACX,YAAL,CAAkBC,GAAG,CAACW,QAAJ,EAAlB,CAAf;AAEAF,EAAAA,MAAM,CAACG,EAAP,CAAU,OAAV,EAAmB,MAAM,CAAE,CAA3B;AAEA,SAAOH,MAAP;AACD,CAnBM","sourcesContent":["import * as http from \"http\";\nimport Koa from \"koa\";\nimport Router from \"koa-router\";\n\nimport { serveViews, serveStatic } from \"../middleware/serve\";\n\nexport const createServer = async () => {\n  const app = new Koa();\n  const router = new Router();\n\n  router.get(\"/\", async ctx => {\n    await ctx.render(\"index\");\n  });\n\n  // TODO: error-handling, not-found-handler, compress, cors\n  app\n    .use(serveStatic())\n    .use(serveViews())\n    .use(router.routes());\n\n  const server = http.createServer(app.callback());\n\n  server.on(\"close\", () => {});\n\n  return server;\n};\n"],"file":"server.js"}